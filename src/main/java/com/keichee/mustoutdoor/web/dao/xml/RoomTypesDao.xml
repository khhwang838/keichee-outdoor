<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.keichee.mustoutdoor.web.dao.RoomTypessDao">

    <insert id="insertRoomType" >
		INSERT INTO MO_RoomTypes (ROOM_TYPE_ID, ROOM_TYPE_NAME, ACMD_TYPE_IMG_URL)
		VALUES (#{roomTypeId}, #{roomTypeName}, #{acmdTypeImgUrl})
	</insert>

    <update id="updateRoomType" >
        UPDATE MO_RoomTypes SET
		ROOM_TYPE_NAME = #{roomTypeName}
			<if test="acmdTypeImgUrl != null and acmdTypeImgUrl.length() > 0">
				, ACMD_TYPE_IMG_URL = #{acmdTypemgUrl}
			</if>
        WHERE ROOM_TYPE_ID = #{roomTypeId}
    </update>

    <delete id="deleteRoomTypeById">
		DELETE FROM MO_RoomTypes WHERE ROOM_TYPE_ID = #{roomTypeId}
	</delete>

	<!-- 숙소 목록 조회 시 사용 -->
	<select id="selectTypesByAcmdUid" resultType="com.keichee.mustoutdoor.web.domain.acmd.dto.RoomTypesDto">
		SELECT
			t.ROOM_TYPE_ID as roomTypeId
			, t.ROOM_TYPE_NAME as roomTypeName
			, t.ROOM_TYPE_IMG_URL as roomTypeImgUrl
		FROM MO_Rooms r, MO_RoomTypes t
		WHERE r.ACMD_UID = #{acmdUid} 
			AND r.ROOM_TYPE_ID = t.ROOM_TYPE_ID
	</select>
</mapper>