<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.keichee.mustoutdoor.web.dao.PolicyOptionsDao">

	<select id="selectPolicyOptions" resultType="com.keichee.mustoutdoor.web.domain.acmd.dto.PolicyOptionsDto">
		SELECT 
			PLCY_OPT_UID 	as plcyOptUid
			, PLCY_OPT_NAME 	as plcyOptName
			, PLCY_OPT_DESC	as plcyOptDesc
			, ACMD_UID as acmdUid
			, USER_ID as userId
		FROM MO_PolicyOptions a
		WHERE ACMD_UID = #{acmdUid} and USER_ID = #{userId}
	</select>
	
    <insert id="insertPolicyOption" parameterType="com.keichee.mustoutdoor.web.domain.acmd.dto.PolicyOptionsDto">
		INSERT INTO MO_PolicyOptions 
			(ACMD_UID, USER_ID, PLCY_OPT_UID, PLCY_OPT_NAME, PLCY_OPT_DESC)
		VALUES (#{acmdUid}, #{userId}, #{plcyOptUid}, #{plcyOptName}, #{plcyOptDesc})
	</insert>

    <update id="updatePolicyOption" parameterType="com.keichee.mustoutdoor.web.domain.acmd.dto.PolicyOptionsDto">
        UPDATE MO_PolicyOptions SET
	        <if test="plcyOptName != null and plcyOptName.length() > 0">
			, PLCY_OPT_NAME = #{plcyOptName}
			</if>
			<if test="plcyOptDesc != null and plcyOptDesc.length() > 0">
			, PLCY_OPT_DESC = #{plcyOptDesc}
			</if>
        WHERE PLCY_OPT_UID = #{plcyOptUid} 
        	and ACMD_UID = #{acmdUid} 
        	and USER_ID = #{userId}
    </update>

    <delete id="deletePolicyOption">
		DELETE FROM MO_PolicyOptions WHERE PLCY_OPT_UID = #{plcyOptUid}
	</delete>
	
	<delete id="deletePolicyOptionsByAcmdUid">
		DELETE FROM MO_PolicyOptions WHERE ACMD_UID = #{acmdUid}
	</delete>
	
	<delete id="deletePolicyOptionsByUserId">
		DELETE FROM MO_PolicyOptions WHERE USER_ID = #{userId}
	</delete>
</mapper>